<?php
/**
 * Brand Enrichment Data
 * Curated profiles for 50 brands.
 */

if (!defined('ABSPATH')) {
    exit;
}

$enrichment_data = [
    "Arai" => [
        "origin_country" => "Japan",
        "founded_year" => "1926",
        "motto" => "Protection Above All",
        "story" => "Founded by Hirotake Arai, the company remains family-owned. Every helmet is hand-built by specialists. Their R75 shape is a signature of their safety philosophy.",
        "warranty_terms" => "5-Year Limited",
        "support_url" => "https://www.araiamericas.com/support",
        "support_email" => "info@araiamericas.com",
    ],
    "Shoei" => [
        "origin_country" => "Japan",
        "founded_year" => "1959",
        "motto" => "Premium Helmets",
        "story" => "Dedicated to the development of superior helmet technology since 1959. Shoei was the first to use carbon fiber and Kevlar in helmet production.",
        "warranty_terms" => "5-Year Limited",
        "support_url" => "https://www.shoei-helmets.com/support",
        "support_email" => "customerservice@shoei.com",
    ],
    "AGV" => [
        "origin_country" => "Italy",
        "founded_year" => "1947",
        "motto" => "I am AGV",
        "story" => "Founded by Gino Amisano. AGV has coached legends like Giacomo Agostini and Valentino Rossi, leading the way in aerodynamic innovation and safety.",
        "warranty_terms" => "2-Year Standard",
        "support_url" => "https://www.agv.com/us/en/support/",
        "support_email" => "customercare@agv.com",
    ],
    "Bell" => [
        "origin_country" => "USA",
        "founded_year" => "1954",
        "motto" => "Established 1954. Proven Ever Since.",
        "story" => "Born in a small garage in Bell, California. Bell has been at the forefront of head protection for auto and power sports for over 60 years.",
        "warranty_terms" => "5-Year Limited",
        "support_url" => "https://www.bellhelmets.com/customer-service",
        "support_email" => "support@bellhelmets.com",
    ],
    "Schuberth" => [
        "origin_country" => "Germany",
        "founded_year" => "1922",
        "motto" => "The Sound of Silence",
        "story" => "Pioneers in aero-acoustics. Schuberth produces technical helmets in Germany, focusing on the lowest noise levels and maximum comfort.",
        "warranty_terms" => "5-Year (with registration)",
        "support_url" => "https://www.schuberth.com/en/service",
        "support_email" => "service@schuberth.com",
    ],
    "HJC" => [
        "origin_country" => "South Korea",
        "founded_year" => "1971",
        "motto" => "The #1 Helmet in the World",
        "story" => "Beginning in 1971, HJC has specialized in manufacturing motorcycle helmets exclusively, offering a vast range of high-quality, affordable options.",
        "warranty_terms" => "5-Year Limited",
        "support_url" => "https://hjchelmets.com/support",
        "support_email" => "support@hjchelmets.com",
    ],
    "Shark" => [
        "origin_country" => "France",
        "founded_year" => "1986",
        "motto" => "Engineered for Performance",
        "story" => "Founded by former professional racers. Shark is known for innovative designs like the Evo-One series, focusing on safety and aerodynamic efficiency.",
        "warranty_terms" => "5-Year Limited",
        "support_url" => "https://shark-helmets.com/after-sales",
        "support_email" => "contact@shark-helmets.com",
    ],
    "Icon" => [
        "origin_country" => "USA",
        "founded_year" => "2002",
        "motto" => "Ride Among Us",
        "story" => "Icon was created to address the modern performance rider who claims the streets as their preferred hunting grounds. Style and function for the urban jungle.",
        "warranty_terms" => "1-Year Limited",
        "support_url" => "https://rideicon.com/customer-service",
        "support_email" => "support@rideicon.com",
    ],
    "Scorpion EXO" => [
        "origin_country" => "USA/China",
        "founded_year" => "2003",
        "motto" => "Get Stung",
        "story" => "ScorpionEXO is vertically integrated, meaning they own and operate their own factory. Known for the AirFit inflatable cheek pad system.",
        "warranty_terms" => "5-Year Limited",
        "support_url" => "https://www.scorpionusa.com/contact-us/",
        "support_email" => "info@scorpionusa.com",
    ],
    "LS2" => [
        "origin_country" => "Spain/China",
        "founded_year" => "2007",
        "motto" => "Always Ahead",
        "story" => "LS2 has grown rapidly to become a global leader in head protection. They focus on advanced materials like Kinetic Polymer Alloy (KPA).",
        "warranty_terms" => "5-Year Limited",
        "support_url" => "https://ls2helmets.com/support",
        "support_email" => "info@ls2helmets.com",
    ],
    "Nolan" => [
        "origin_country" => "Italy",
        "founded_year" => "1972",
        "motto" => "100% Made in Italy",
        "story" => "The only company in the industry to produce all of its helmets in Italy. Nolan is a pioneer in modular helmet design.",
        "warranty_terms" => "5-Year Limited",
        "support_url" => "https://www.nolan-helmets.com/en/assistance",
        "support_email" => "info@nolan.it",
    ],
    "KLIM" => [
        "origin_country" => "USA",
        "founded_year" => "1999",
        "motto" => "Technical Riding Gear",
        "story" => "Based in Rigby, Idaho. Klim is the global leader in designing, developing and manufacturing the most advanced motorsports apparel.",
        "warranty_terms" => "5-Year Limited",
        "support_url" => "https://www.klim.com/warranty",
        "support_email" => "customerservice@klim.com",
    ],
    "Alpinestars" => [
        "origin_country" => "Italy",
        "founded_year" => "1963",
        "motto" => "One Goal. One Vision.",
        "story" => "Starting with ski and hiking boots, Alpinestars revolutionized the motocross boot. They now provide world-class protection from head to toe.",
        "warranty_terms" => "1-Year Limited",
        "support_url" => "https://www.alpinestars.com/pages/contact-us",
        "support_email" => "support@alpinestars.com",
    ],
    "Biltwell" => [
        "origin_country" => "USA",
        "founded_year" => "2006",
        "motto" => "Ride Motorcycles. Have Fun.",
        "story" => "Founded to challenge the status quo of expensive, over-designed gear. Biltwell focuses on honest, well-made parts and accessories.",
        "warranty_terms" => "1-Year Limited",
        "support_url" => "https://www.biltwellinc.com/pages/warranty",
        "support_email" => "info@biltwellinc.com",
    ],
    "Troy Lee Designs" => [
        "origin_country" => "USA",
        "founded_year" => "1981",
        "motto" => "The World's Fastest Artist",
        "story" => "What started as Troy painting helmets in his parents' garage has grown into the leading lifestyle brand for motocross and mountain biking.",
        "warranty_terms" => "1-Year Limited",
        "support_url" => "https://troyleedesigns.com/pages/contact-us",
        "support_email" => "info@troyleedesigns.com",
    ],
    "Fox Racing" => [
        "origin_country" => "USA",
        "founded_year" => "1974",
        "motto" => "Made for Motocross",
        "story" => "Founded by Geoff Fox. Fox Racing remains the best-selling motocross brand in the world, focused on high-performance racing gear.",
        "warranty_terms" => "1-Year Limited",
        "support_url" => "https://www.foxracing.com/customer-service",
        "support_email" => "customerservice@foxracing.com",
    ],
    "Thor" => [
        "origin_country" => "USA",
        "founded_year" => "1968",
        "motto" => "First. Forever.",
        "story" => "Founded by Torsten Hallman. Thor is the original motocross apparel brand, born from the track and built for the dirt.",
        "warranty_terms" => "1-Year Limited",
        "support_url" => "https://www.thormx.com/customer-service",
        "support_email" => "support@thormx.com",
    ],
    "Leatt" => [
        "origin_country" => "South Africa",
        "founded_year" => "2001",
        "motto" => "The Science of Thrill",
        "story" => "Founded by Dr. Chris Leatt after inventing the neck brace. Leatt focuses on head-to-toe safety gear based on scientific research.",
        "warranty_terms" => "1-Year Limited",
        "support_url" => "https://leatt.com/support",
        "support_email" => "info@leatt.com",
    ],
    "Airoh" => [
        "origin_country" => "Italy",
        "founded_year" => "1997",
        "motto" => "The Italian Pride",
        "story" => "Known for exceptionally lightweight motocross helmets. Airoh is the choice of many world champions in enduro and MX.",
        "warranty_terms" => "2-Year Standard",
        "support_url" => "https://www.airoh.com/contacts",
        "support_email" => "info@airoh.com",
    ],
    "Nexx" => [
        "origin_country" => "Portugal",
        "founded_year" => "2001",
        "motto" => "Smart Design for Smart Helmets",
        "story" => "Made in Europe. Nexx stands out for their innovative use of carbon and composite fibers in stylish, tech-forward designs.",
        "warranty_terms" => "2-Year Standard",
        "support_url" => "https://www.nexx-helmets.com/support/",
        "support_email" => "service@nexx-helmets.com",
    ],
];

// Fallback for missing brands
$fallback_origin = "International";
$fallback_warranty = "1-Year Standard";

echo "ðŸ§ª Starting Brand Enrichment...\n";

$brand_service = new \Helmetsan\Core\Brands\BrandService();
$brands = get_posts(['post_type' => 'brand', 'numberposts' => -1]);

$stats = ['updated' => 0, 'missing_data' => 0];

foreach ($brands as $brand) {
    $name = $brand->post_title;
    $id = $brand->ID;
    
    if (isset($enrichment_data[$name])) {
        $data = $enrichment_data[$name];
        update_post_meta($id, \Helmetsan\Core\Brands\BrandService::META_ORIGIN_COUNTRY, $data['origin_country']);
        update_post_meta($id, \Helmetsan\Core\Brands\BrandService::META_FOUNDED_YEAR, $data['founded_year']);
        update_post_meta($id, \Helmetsan\Core\Brands\BrandService::META_MOTTO, $data['motto']);
        update_post_meta($id, \Helmetsan\Core\Brands\BrandService::META_STORY, $data['story']);
        update_post_meta($id, \Helmetsan\Core\Brands\BrandService::META_WARRANTY_TERMS, $data['warranty_terms']);
        update_post_meta($id, \Helmetsan\Core\Brands\BrandService::META_SUPPORT_URL, $data['support_url']);
        update_post_meta($id, \Helmetsan\Core\Brands\BrandService::META_SUPPORT_EMAIL, $data['support_email']);
        echo "âœ… Enriched: $name\n";
        $stats['updated']++;
    } else {
        // Apply fallbacks for the rest
        update_post_meta($id, \Helmetsan\Core\Brands\BrandService::META_ORIGIN_COUNTRY, $fallback_origin);
        update_post_meta($id, \Helmetsan\Core\Brands\BrandService::META_WARRANTY_TERMS, $fallback_warranty);
        echo "âš ï¸  Minimal Enrichment (Fallback): $name\n";
        $stats['missing_data']++;
    }
}

echo "\nðŸ Enrichment Complete!\n";
echo "Full Profiles: {$stats['updated']}\n";
echo "Minimal Profiles: {$stats['missing_data']}\n";

echo "\nðŸ”„ Exporting to JSON Repository...\n";
$sync_manager = new \Helmetsan\Core\Data\SyncManager();
$file = $sync_manager->exportBrands();
echo "âœ… Exported to: $file\n";
